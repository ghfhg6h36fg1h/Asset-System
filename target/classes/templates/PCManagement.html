<!doctype html>
<html lang="ch" xmlns:th="http://www.w3.org/1999/xhtml">
<head th:include="../common/head :: commonHeader('首页')"></head>

<body>
<div id="wrap">
    <!-- 左侧菜单栏目块 -->
    <div th:include="../common/DivSide :: divHead"></div>
    <!-- 右侧具体内容栏目 -->
    <div id="rightContent">
        <a class="toggle-btn" id="nimei">
            <i class="glyphicon glyphicon-align-justify"></i>
        </a>
        <!-- Tab panes -->
        <div class="tab-content">

            <!--PC管理模块-->
            <div role="tabpanel" id="user">

                <div class="check-div form-inline">

                    <div class="col-xs-3">
                        <button class="btn btn-yellow btn-xs" data-toggle="modal" data-target="#addUser">添加PC</button>
                        <button class="btn btn-green btn-xs" type="submit" onclick="ALLQR()">批量生成二维码</button>

                    </div>

                    <form action="/PC">
                        <div class="col-xs-4">
                            <input type="text" class="form-control input-sm" id="keyWord" name="keyWord"
                                   placeholder="输入文字搜索" th:value="${keyWord}"/>
                            <button class="btn btn-white btn-xs ">查 询</button>
                        </div>
                    </form>
                    <div class="col-lg-3 col-lg-offset-2 col-xs-4" style=" padding-right: 40px;text-align: right;">
                        <label for="paixu">排序:&nbsp;</label>
                        <select id="sort" name="sort" onchange="Sort()" class=" form-control">
                            <option value="" selected="">---请选择---</option>
                            <option value="floor">楼层</option>
                            <option value="pcname">PC名</option>
                            <option value="model">型号</option>
                        </select>
                    </div>
                </div>
                <div class="data-div">
                    <div class="row tableHeader">
                        <div class="col-xs-2 ">
                            PC名
                        </div>
                        <div class="col-xs-2">
                            楼层
                        </div>
                        <div class="col-xs-2">
                            型号
                        </div>
                        <div class="col-xs-2">
                            姓名
                        </div>
                        <div class="col-xs-2">
                            资产编号
                        </div>
                        <div class="col-xs-2">
                            操作
                        </div>
                    </div>
                    <div class="tablebody">
                        <div class="row" th:each="pc,pcStat:${PCs}">
                            <div class="col-xs-2">
                                <span th:text="${pc.PCName}"></span>
                            </div>
                            <div class="col-xs-2">
                                <span th:text="${pc.Floor}"></span>
                            </div>
                            <div class="col-xs-2">
                                <span th:text="${pc.Model}"></span>
                            </div>
                            <div class="col-xs-2">
                                <span th:text="${pc.username}"></span>
                            </div>
                            <div class="col-xs-2">
                                <span th:text="${pc.AssetNumber}"></span>
                            </div>
                            <div class="col-xs-2">
                                <button class="btn btn-success btn-xs" data-toggle="modal" data-target="#Select"
                                        th:onclick="'javascript:PCInfo(\''+${pcStat.index}+'\')'">详情
                                </button>
                                <button class="btn btn-success btn-xs" data-toggle="modal" data-target="#reviseUser"
                                        th:onclick="'javascript:UpdatePCInfo(\''+${pcStat.index}+'\')'">修改
                                </button>
                                <button class="btn btn-danger btn-xs" data-toggle="modal" data-target="#deleteUser"
                                        th:onclick="'javascript:DeletePCInfo(\''+${pcStat.index}+'\')'">删除
                                </button>
                            </div>

                        </div>
                    </div>

                </div>
                <!--批量二维码-->
                <script>
                    function ALLQR() {
                        location.href = "/ALLQR";
                    }
                </script>
                <!--排序选择-->
                <script>
                    function Sort() {
                        var Svalue = document.getElementById("sort").value;
                        location.href = "/PC?sort=" + Svalue;
                    }
                </script>
                <!--详情模态框传值-->
                <script th:inline="javascript" type="text/javascript">
                    function PCInfo(index) {
                        var xxx = [[${PCs}]];
                        document.getElementById("modelInfo_PCname").value = xxx[index].PCName;
                        document.getElementById("modelInfo_floor").value = xxx[index].floor;
                        document.getElementById("modelInfo_Model").value = xxx[index].model;
                        document.getElementById("modelInfo_userName").value = xxx[index].username;
                        document.getElementById("modelInfo_AssetNumber").value = xxx[index].assetNumber;
                        document.getElementById("modelInfo_MAC").value = xxx[index].MAC;
                        document.getElementById("modelInfo_SN").value = xxx[index].SN;
                        document.getElementById("modelInfo_userNumber").value = xxx[index].userNumber;
                        document.getElementById("modelInfo_ID").value = xxx[index].id;

                    }

                </script>
                <!--修改模态框传值-->
                <script th:inline="javascript" type="text/javascript">
                    function UpdatePCInfo(index) {
                        var yyy = [[${PCs}]];

                        document.getElementById("updateInfo_PCID").value = yyy[index].id;
                        document.getElementById("updateInfo_PCname").value = yyy[index].PCName;
                        document.getElementById("updateInfo_floor").value = yyy[index].floor;
                        document.getElementById("updateInfo_Model").value = yyy[index].model;
                        document.getElementById("updateInfo_userName").value = yyy[index].username;
                        document.getElementById("updateInfo_AssetNumber").value = yyy[index].assetNumber;
                        document.getElementById("updateInfo_MAC").value = yyy[index].MAC;
                        document.getElementById("updateInfo_SN").value = yyy[index].SN;
                        document.getElementById("updateInfo_userNumber").value = yyy[index].userNumber;
                        var p = yyy[index].state;
                        $("input[id='updateInfo_state']").eq(p).click();

                    }

                </script>
                <!--删除模态框传值-->
                <script th:inline="javascript" type="text/javascript">
                    function DeletePCInfo(index) {
                        var xxx = [[${PCs}]];
                        document.getElementById("deletePCID").value = xxx[index].id;
                    }

                </script>

                <!--页码块-->
                <footer class="footer">
                    <ul class="pagination">

                        <form action="/PC" id="fff" name="fff">
                            <input type="text" id="jumpPage" name="jumpPage" style="width:30px;"/>
                            <button type="submit">跳转</button>
                            <a th:href="@{/PC(page=${currentPage},type =last)}">上一页</a>
                            <span th:text="${currentPage}"/>
                            <a th:href="@{/PC(page=${currentPage},type=next)}">下一页</a>
                            共<span th:text="${PCPage}"/>页
                        </form>
                    </ul>
                </footer>
                <!--弹出添加PC窗口-->
                <div class="modal fade" id="addUser" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="AddPC" name="AddPC">添加PC</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">PC名：</label>
                                            <div class="col-xs-8 ">
                                                <input type="text" class="form-control input-sm duiqi" id="add_pcName"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sLink" class="col-xs-3 control-label">型号</label>
                                            <div class="col-xs-8 ">
                                                <input type="" class="form-control input-sm duiqi" id="add_model"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sOrd" class="col-xs-3 control-label">姓名</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="add_name"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">资产编号</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="add_asset"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">MAC</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="add_mac"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">SN</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="add_sn"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">工号</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="add_number"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">楼层：</label>
                                            <div class="col-xs-8">
                                                <select id="add_floor" class=" form-control select-duiqi">
                                                    <option value="研发三楼">研发三楼</option>
                                                    <option value="研发四楼">研发四楼</option>
                                                    <option value="研发二楼">研发二楼</option>
                                                    <option value="产线一楼">产线一楼</option>
                                                    <option value="产线二楼">产线二楼</option>
                                                    <option value="产线三楼">产线三楼</option>
                                                    <option value="产线四楼">产线四楼</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="situation" class="col-xs-3 control-label">状态：</label>
                                            <div class="col-xs-8">
                                                <label class="control-label" for="anniu">
                                                    <input type="radio" name="add_state" id="add_state"
                                                           value="1"/>正常</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <label class="control-label" for="meun">
                                                    <input type="radio" name="add_state" id="add_state" value="0"/> 待调拨</label>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <input type="reset" class="btn btn-xs btn-white" data-dismiss="modal"
                                                   value="取消"/>
                                            <input type="submit" onclick="addPC(this.form)" class="btn btn-xs btn-green"
                                                   value="保存"/>
                                            <input type="button" onclick="addPC(this.form)" class="btn btn-xs btn-green"
                                                   value="保存并继续添加"/>
                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!--添加PC AJAX-->
                <script type="text/javascript">
                    function addPC(form) {
                        var pcName = form.add_pcName.value;
                        var model = form.add_model.value;
                        var name = form.add_name.value;
                        var asset = form.add_asset.value;
                        var mac = form.add_mac.value;
                        var sn = form.add_sn.value;
                        var number = form.add_number.value;
                        var floor = form.add_floor.value;
                        var state = form.add_state.value;
                        var str = "/SavePC";
                        $.ajax({
                            url: str,
                            async: true,
                            type: "POST",
                            data: {
                                pcName: pcName, model: model, name: name, asset: asset, mac: mac,
                                sn: sn, number: number, floor: floor, state: state
                            },
                            success: function () {
                                alert("Success")
                            },
                        });
                        form.add_pcName.value = "";
                        form.add_model.value = "";
                        form.add_name.value = "";
                        form.add_asset.value = "";
                        form.add_mac.value = "";
                        form.add_sn.value = "";
                        form.add_number.value = "";
                        form.add_floor.value = "";


                    }
                </script>
                <!--修改PC AJAX-->
                <script type="text/javascript">
                    function UpdatePC(form) {
                        var id = form.updateInfo_PCID.value;
                        var pcName = form.updateInfo_PCname.value;
                        var model = form.updateInfo_Model.value;
                        var name = form.updateInfo_userName.value;
                        var asset = form.updateInfo_AssetNumber.value;
                        var mac = form.updateInfo_MAC.value;
                        var sn = form.updateInfo_SN.value;
                        var number = form.updateInfo_userNumber.value;
                        var floor = form.updateInfo_floor.value;
                        var state = form.updateInfo_state.value;
                        var str = "/UpdatePC";
                        $.ajax({
                            url: str,
                            async: true,
                            type: "POST",
                            data: {
                                id: id, pcName: pcName, model: model, name: name, asset: asset, mac: mac,
                                sn: sn, number: number, floor: floor, state: state
                            },
                            success: function () {
                                alert("修改成功，建议更新二维码")
                            },
                        });

                    }
                </script>
                <!--删除PC AJAX-->
                <script type="text/javascript">
                    function Delete() {
                        var id = document.getElementById("deletePCID").value;
                        var str = "/DeletePC";
                        $.ajax({
                            url: str,
                            async: true,
                            type: "POST",
                            data: {id: id},

                        });
                    }
                </script>
                <!--详情生成二维码-->
                <script type="text/javascript">
                    function QR() {
                        var id = document.getElementById("modelInfo_ID").value;
                        var str = "/QRCode";
                        $.ajax({
                            url: str,
                            async: true,
                            type: "POST",
                            data: {id: id},

                        });
                    }
                </script>

                <!--弹出修改PC窗口-->
                <div class="modal fade" id="reviseUser" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">修改PC</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">PC名：</label>
                                            <div class="col-xs-8 ">
                                                <input type="" class="form-control input-sm duiqi"
                                                       id="updateInfo_PCname" placeholder=""/>
                                                <input type="hidden" class="form-control input-sm duiqi"
                                                       id="updateInfo_PCID" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">楼层：</label>
                                            <div class="col-xs-8">
                                                <select id="updateInfo_floor" class=" form-control select-duiqi">
                                                    <option value="研发三楼">研发三楼</option>
                                                    <option value="研发四楼">研发四楼</option>
                                                    <option value="研发二楼">研发二楼</option>
                                                    <option value="产线一楼">产线一楼</option>
                                                    <option value="产线二楼">产线二楼</option>
                                                    <option value="产线三楼">产线三楼</option>
                                                    <option value="产线四楼">产线四楼</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sOrd" class="col-xs-3 control-label">型号：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="updateInfo_Model"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">姓名：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi"
                                                       id="updateInfo_userName" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">资产编号：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi"
                                                       id="updateInfo_AssetNumber" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">MAC：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="updateInfo_MAC"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">SN：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="updateInfo_SN"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">工号：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi"
                                                       id="updateInfo_userNumber" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="situation" class="col-xs-3 control-label">状态：</label>
                                            <div class="col-xs-8">
                                                <label class="control-label" for="anniu">
                                                    <input type="radio" name="updateInfo_state" id="updateInfo_state"
                                                           value="1"/>正常</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <label class="control-label" for="meun">
                                                    <input type="radio" name="updateInfo_state" id="updateInfo_state"
                                                           value="0"/> 待调拨</label>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <input type="reset" class="btn btn-xs btn-white" data-dismiss="modal"
                                                   value="取消"/>
                                            <input type="submit" class="btn btn-xs btn-green"
                                                   onclick="UpdatePC(this.form)" value="修改"/>
                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!--弹出详情PC窗口-->
                <div class="modal fade" id="Select" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="SelectPC">PC详情</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">PC名：</label>
                                            <div class="col-xs-8 ">
                                                <input type="" class="form-control input-sm duiqi" id="modelInfo_PCname"
                                                       placeholder=""/>
                                                <input type="hidden" class="form-control input-sm duiqi"
                                                       id="modelInfo_ID" placeholder=""/>

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sLink" class="col-xs-3 control-label">楼层：</label>
                                            <div class="col-xs-8 ">
                                                <input type="" id="modelInfo_floor" class="form-control input-sm duiqi"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sOrd" class="col-xs-3 control-label">型号：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="modelInfo_Model"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">姓名：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi"
                                                       id="modelInfo_userName" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">资产编号：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi"
                                                       id="modelInfo_AssetNumber" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">MAC：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="modelInfo_MAC"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">SN：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="modelInfo_SN"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">工号：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi"
                                                       id="modelInfo_userNumber" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <input type="reset" class="btn btn-xs btn-white" data-dismiss="modal"
                                                   value="返回"/>
                                            <input type="submit" class="btn btn-xs btn-green" data-dismiss="modal"
                                                   onclick="QR()" value="生成二维码"/>

                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!--弹出删除PC警告窗口-->
                <div class="modal fade" id="deleteUser" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    确定要删除该PC？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <form>
                                    <input type="hidden" id="deletePCID" name="deletePCID"/>
                                    <input type="reset" class="btn btn-xs btn-white" data-dismiss="modal" value="取消"/>
                                    <input type="submit" class="btn  btn-xs btn-danger" onclick="Delete()" value="删除"/>
                                </form>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>

            </div>
        </div>
    </div>
</div>

</body>

</html>