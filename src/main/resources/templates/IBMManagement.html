<!doctype html>
<html lang="ch" xmlns:th="http://www.w3.org/1999/xhtml">
<head th:include="../common/head :: commonHeader('首页')"></head>

<body>
<div id="wrap">
    <!-- 左侧菜单栏目块 -->
    <div th:include="../common/DivSide :: divHead"></div>
    <!-- 右侧具体内容栏目 -->
    <div id="rightContent">
        <a class="toggle-btn" id="nimei">
            <i class="glyphicon glyphicon-align-justify"></i>
        </a>
        <!-- Tab panes -->
        <div class="tab-content">
            <!--IBM管理模块-->
            <div role="tabpanel" id="user">

                <div class="check-div form-inline">

                    <div class="col-xs-3">
                        <button class="btn btn-yellow btn-xs" data-toggle="modal" data-target="#addUser">添加服务器</button>
                        <button class="btn btn-green btn-xs" type="submit" onclick="ALLSQR()">批量生成二维码</button>

                    </div>

                    <form action="/IBM">
                        <div class="col-xs-4">
                            <input type="text" class="form-control input-sm" id="keyWord" name="keyWord"
                                   placeholder="输入文字搜索"/>
                            <button class="btn btn-white btn-xs " type="submit">查 询</button>
                            <button class="btn btn-green btn-xs" type="button" onclick="baoxiu()">待续保</button>

                        </div>
                        <span style="color: #00BDEF" >二维码地址：\\192.168.10.5</span>
                        <button class="btn btn-green btn-xs" type="button" onclick="synchro()">同步</button>
                    </form>

                </div>
                <div class="data-div">
                    <div class="row tableHeader">
                        <div class="col-xs-2 ">
                            名称
                        </div>
                        <div class="col-xs-2">
                            型号
                        </div>
                        <div class="col-xs-2">
                            机型
                        </div>
                        <div class="col-xs-2">
                            序列号
                        </div>
                        <div class="col-xs-2">
                            维保时间
                        </div>
                        <div class="col-xs-2">
                            操作
                        </div>
                    </div>
                    <div class="tablebody">
                        <div class="row" th:each="IBM,IBMStat:${ibmList}">
                            <div th:if="${IBM.state} eq '0'">
                            <div class="col-xs-2">
                                <span th:text="${IBM.name}"></span>
                            </div>
                            <div class="col-xs-2">
                                <span th:text="${IBM.model1}"></span>
                            </div>
                            <div class="col-xs-2">
                                <span th:text="${IBM.model2}"></span>
                            </div>
                            <div class="col-xs-2">
                                <span th:text="${IBM.sn}"></span>
                            </div>
                            <div class="col-xs-2">
                                <span th:text="${IBM.time}"></span>
                            </div>
                            <div class="col-xs-2">
                                <button class="btn btn-success btn-xs"
                                        th:onclick="'javascript:IBMInfo(\''+${IBMStat.index}+'\')'">二维码
                                </button>
                                <button class="btn btn-success btn-xs" data-toggle="modal" data-target="#reviseUser"
                                        th:onclick="'javascript:UpdateIBMInfo(\''+${IBMStat.index}+'\')'">修改
                                </button>
                                <button class="btn btn-danger btn-xs" data-toggle="modal" data-target="#deleteUser"
                                        th:onclick="'javascript:DeleteIBMInfo(\''+${IBMStat.index}+'\')'">删除
                                </button>
                            </div>
                            </div>

                            <div th:if="${IBM.state} eq '1'">
                                <div class="col-xs-2">
                                    <span style="color: #338ec4" th:text="${IBM.name}"></span>
                                </div>
                                <div class="col-xs-2">
                                    <span style="color: #338ec4" th:text="${IBM.model1}"></span>
                                </div>
                                <div class="col-xs-2">
                                    <span style="color: #338ec4" th:text="${IBM.model2}"></span>
                                </div>
                                <div class="col-xs-2">
                                    <span style="color: #338ec4" th:text="${IBM.sn}"></span>
                                </div>
                                <div class="col-xs-2">
                                    <span style="color: #338ec4"  th:text="${IBM.time}"></span>
                                </div>
                                <div class="col-xs-2">
                                    <button class="btn btn-success btn-xs"
                                            th:onclick="'javascript:IBMInfo(\''+${IBMStat.index}+'\')'">二维码
                                    </button>
                                    <button class="btn btn-success btn-xs" data-toggle="modal" data-target="#reviseUser"
                                            th:onclick="'javascript:UpdateIBMInfo(\''+${IBMStat.index}+'\')'">修改
                                    </button>
                                    <button class="btn btn-danger btn-xs" data-toggle="modal" data-target="#deleteUser"
                                            th:onclick="'javascript:DeleteIBMInfo(\''+${IBMStat.index}+'\')'">删除
                                    </button>
                                </div>
                            </div>

                            <div th:if="${IBM.state} eq '2'">
                                <div class="col-xs-2">
                                    <span style="color: #cd0a0a" th:text="${IBM.name}"></span>
                                </div>
                                <div class="col-xs-2">
                                    <span style="color: #cd0a0a" th:text="${IBM.model1}"></span>
                                </div>
                                <div class="col-xs-2">
                                    <span style="color: #cd0a0a" th:text="${IBM.model2}"></span>
                                </div>
                                <div class="col-xs-2">
                                    <span style="color: #cd0a0a" th:text="${IBM.sn}"></span>
                                </div>
                                <div class="col-xs-2">
                                    <span style="color: #cd0a0a" th:text="${IBM.time}"></span>
                                </div>
                                <div class="col-xs-2">
                                    <button class="btn btn-success btn-xs"
                                            th:onclick="'javascript:IBMInfo(\''+${IBMStat.index}+'\')'">二维码
                                    </button>
                                    <button class="btn btn-success btn-xs" data-toggle="modal" data-target="#reviseUser"
                                            th:onclick="'javascript:UpdateIBMInfo(\''+${IBMStat.index}+'\')'">修改
                                    </button>
                                    <button class="btn btn-danger btn-xs" data-toggle="modal" data-target="#deleteUser"
                                            th:onclick="'javascript:DeleteIBMInfo(\''+${IBMStat.index}+'\')'">删除
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!--批量二维码-->
                <script>
                    function ALLSQR() {
                        location.href = "/ALLIBMQR";
                    }
                </script>
                <!--同步-->
                    <script>
                    function synchro() {
                        location.href="/synchro";
                    }
                </script>
                <!--保修-->
                <script>
                    function baoxiu() {
                        location.href="/IBM?st=1";
                    }
                    </script>
                <!--二维码-->
                <script th:inline="javascript" type="text/javascript">
                    function IBMInfo(index) {
                        var yyy = [[${ibmList}]];
                        var IBMid = yyy[index].id;
                        location.href = "/IBMQR?IBMid=" + IBMid;
                    }
                </script>
                <!--修改模态框传值-->
                <script th:inline="javascript" type="text/javascript">
                    function UpdateIBMInfo(index) {
                        var yyy = [[${ibmList}]];

                        document.getElementById("updateInfo_IBMID").value = yyy[index].id;
                        document.getElementById("updateInfo_IBMname").value = yyy[index].name;
                        document.getElementById("updateInfo_model1").value = yyy[index].model1;
                        document.getElementById("updateInfo_model2").value = yyy[index].model2;
                        document.getElementById("updateInfo_SN").value = yyy[index].sn;
                        document.getElementById("updateInfo_time").value = yyy[index].time;
                    }

                </script>
                <!--删除模态框传值-->
                <script th:inline="javascript" type="text/javascript">
                    function DeleteIBMInfo(index) {

                        var xxx = [[${ibmList}]];
                        document.getElementById("deleteIBMID").value = xxx[index].id;

                    }

                </script>

                <!--页码块-->
                <footer class="footer">
                    <ul class="pagination">

                        <form action="/IBM" id="fff" name="fff">
                            <input type="text" id="jumpPage" name="jumpPage" style="width:30px;"/>
                            <button type="submit">跳转</button>
                            <a th:href="@{/IBM(page=${currentPage},type =last)}">上一页</a>
                            <span th:text="${currentPage}"/>
                            <a th:href="@{/IBM(page=${currentPage},type=next)}">下一页</a>
                            共<span th:text="${IBMPage}"/>页
                        </form>
                    </ul>
                </footer>
                <!--弹出添加IBM窗口-->
                <div class="modal fade" id="addUser" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="AddIBM" name="AddIBM">添加IBM</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">名称：</label>
                                            <div class="col-xs-8 ">
                                                <input type="text" class="form-control input-sm duiqi" id="add_IBMName"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sLink" class="col-xs-3 control-label">型号</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="add_IBMModel"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sOrd" class="col-xs-3 control-label">机型</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="add_IBMModel2"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">序列号</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="add_IBMSN"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">维保时间</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="add_IBMTime"
                                                       placeholder=""/>
                                            </div>
                                        </div>

                                        <div class="modal-footer">
                                            <input type="reset" class="btn btn-xs btn-white" data-dismiss="modal"
                                                   value="取消"/>
                                            <input type="submit" onclick="addIBM(this.form)"
                                                   class="btn btn-xs btn-green"
                                                   value="保存"/>
                                            <input type="button" onclick="addIBM(this.form)"
                                                   class="btn btn-xs btn-green"
                                                   value="保存并继续添加"/>
                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!--添加IBM AJAX-->
                <script type="text/javascript">
                    function addIBM(form) {
                        var IBMName = form.add_IBMName.value;
                        var model = form.add_IBMModel.value;
                        var model2 = form.add_IBMModel2.value;
                        var sn = form.add_IBMSN.value;
                        var time = form.add_IBMTime.value;

                        var str = "/SaveIBM";
                        $.ajax({
                            url: str,
                            async: false,
                            type: "POST",
                            data: {
                                IBMName: IBMName, model: model, model2: model2,
                                sn: sn, time: time
                            },
                            success: function () {
                                alert("Success")
                            },
                        });
                        form.add_IBMName.value = "";
                        form.add_IBMModel.value = "";
                        form.add_IBMModel2.value = "";
                        form.add_IBMSN.value = "";
                        form.add_IBMTime.value = "";
                    }
                </script>
                <!--修改IBM AJAX-->
                <script type="text/javascript">
                    function UpdateIBM(form) {
                        var id = form.updateInfo_IBMID.value;
                        var name = form.updateInfo_IBMname.value;
                        var model1 = form.updateInfo_model1.value;
                        var model2 = form.updateInfo_model2.value;
                        var sn = form.updateInfo_SN.value;
                        var time = form.updateInfo_time.value;
                        var str = "/UpdateIBM";

                        $.ajax({
                            url: str,
                            async: false,
                            type: "POST",
                            data: {
                                id: id, name: name, model1: model1, model2: model2,
                                sn: sn, time: time
                            },
                            success: function () {
                                alert("修改成功，建议更新二维码");
                            },
                            error: function () {
                                alert("error");
                            }
                        });

                    }
                </script>
                <!--删除IBM AJAX-->
                <script type="text/javascript">
                    function Delete() {
                        var id = document.getElementById("deleteIBMID").value;

                        var str = "/DeleteIBM";
                        $.ajax({
                            url: str,
                            async: true,
                            type: "POST",
                            data: {id: id},

                        });
                    }
                </script>
                <!--详情生成二维码-->
                <script type="text/javascript">
                    function QR() {
                        var id = document.getElementById("modelInfo_ID").value;
                        var str = "/QRCode";
                        $.ajax({
                            url: str,
                            async: true,
                            type: "POST",
                            data: {id: id},

                        });
                    }
                </script>

                <!--弹出修改IBM窗口-->
                <div class="modal fade" id="reviseUser" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">修改IBM</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">名称：</label>
                                            <div class="col-xs-8 ">
                                                <input type="" class="form-control input-sm duiqi"
                                                       id="updateInfo_IBMname" placeholder=""/>
                                                <input type="hidden" class="form-control input-sm duiqi"
                                                       id="updateInfo_IBMID" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">型号：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi"
                                                       id="updateInfo_model1" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">机型：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi"
                                                       id="updateInfo_model2" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">SN：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi" id="updateInfo_SN"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">维保时间：</label>
                                            <div class="col-xs-8">
                                                <input type="" class="form-control input-sm duiqi"
                                                       id="updateInfo_time" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <input type="reset" class="btn btn-xs btn-white" data-dismiss="modal"
                                                   value="取消"/>
                                            <input type="submit" class="btn btn-xs btn-green"
                                                   onclick="UpdateIBM(this.form)" value="修改"/>
                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!--弹出详情IBM窗口-->
                <div class="modal fade" id="Select" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="SelectIBM">IBM详情</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">IBM名：</label>
                                            <div class="col-xs-8 ">
                                                <input style="color: #2d2d2d" readonly="readonly"
                                                       class="form-control input-sm duiqi" id="modelInfo_IBMname"
                                                       placeholder=""/>
                                                <input type="hidden" class="form-control input-sm duiqi"
                                                       id="modelInfo_ID" placeholder=""/>

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sLink" class="col-xs-3 control-label">楼层：</label>
                                            <div class="col-xs-8 ">
                                                <input style="color: #2d2d2d" readonly="readonly" id="modelInfo_floor"
                                                       class="form-control input-sm duiqi"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sOrd" class="col-xs-3 control-label">型号：</label>
                                            <div class="col-xs-8">
                                                <input style="color: #2d2d2d" readonly="readonly"
                                                       class="form-control input-sm duiqi" id="modelInfo_Model"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">姓名：</label>
                                            <div class="col-xs-8">
                                                <input style="color: #2d2d2d" readonly="readonly"
                                                       class="form-control input-sm duiqi"
                                                       id="modelInfo_userName" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">资产编号：</label>
                                            <div class="col-xs-8">
                                                <input style="color: #2d2d2d" readonly="readonly"
                                                       class="form-control input-sm duiqi"
                                                       id="modelInfo_AssetNumber" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">MAC：</label>
                                            <div class="col-xs-8">
                                                <input style="color: #2d2d2d" readonly="readonly"
                                                       class="form-control input-sm duiqi" id="modelInfo_MAC"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">SN：</label>
                                            <div class="col-xs-8">
                                                <input style="color: #2d2d2d" readonly="readonly"
                                                       class="form-control input-sm duiqi" id="modelInfo_SN"
                                                       placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">工号：</label>
                                            <div class="col-xs-8">
                                                <input style="color: #2d2d2d" readonly="readonly"
                                                       class="form-control input-sm duiqi"
                                                       id="modelInfo_userNumber" placeholder=""/>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <input type="reset" class="btn btn-xs btn-white" data-dismiss="modal"
                                                   value="返回"/>
                                            <input type="submit" class="btn btn-xs btn-green" data-dismiss="modal"
                                                   onclick="QR()" value="生成二维码"/>

                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!--弹出删除IBM警告窗口-->
                <div class="modal fade" id="deleteUser" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    确定要删除该IBM？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <form>
                                    <input type="hidden" id="deleteIBMID" name="deleteIBMID"/>
                                    <input type="reset" class="btn btn-xs btn-white" data-dismiss="modal" value="取消"/>
                                    <input type="submit" class="btn  btn-xs btn-danger" onclick="Delete()" value="删除"/>
                                </form>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>

            </div>

        </div>
    </div>
</div>

</body>

</html>